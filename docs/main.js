!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.play=t.movePlayField=void 0;var r=n(2),o={left:{direction:"left",count:0},down:{direction:"down",count:1},right:{direction:"right",count:2},up:{direction:"up",count:3}},u=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],i=function(e){return e.reduce(function(e,t){return e.concat(t)},[])},c=function(e,t){return e.map(function(n,r){return n.map(function(n,o){return t(n,r,o,e)})})},l=function(e){return Math.floor(Math.random()*Math.floor(e))},d=function(e){var t=c(e,function(e,t,n){return[t,n,e]}).reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return 0===e[2]});if(0===t.length)return e;var n=l(t.length),r=t[n][0],o=t[n][1],u=l(100)<90?2:4;return c(e,function(e,t,n){return t===r&&n===o?u:e})},a=t.movePlayField=function(e,t){var n=(0,r.rotateMatrixClockwise)(e,o[t].count),i=n.map(function(e){return function e(t){return t.length<2?t:t[0]===t[1]?[2*t[0]].concat(e(t.slice(2))):[t[0]].concat(e(t.slice(1)))}(e.filter(function(e){return 0!==e}))}),l=c(u,function(e,t,n){return e+i[t][n]?i[t][n]:0});return(0,r.rotateMatrixCounter)(l,o[t].count)};t.play=function(e){var t=e.prevField,n=e.direction;if(e.isNewGame)return{prevField:u,nextField:d(u)};var r=a(t,n);if(function(e,t){var n=i(e),r=i(t);return n.length===r.length&&!!n.every(function(e,t){return e===r[t]})}(r,t))return{prevField:t,nextField:r};var o=d(r);return{prevField:t,nextField:o,victory:i(o).includes(2048),defeat:function(e){if(e.reduce(function(e,t){return e+(t.includes(0)?1:0)},0))return!1;return!c(e,function(e,t,n,r){var o=t>0&&e===r[t-1][n],u=n>0&&e===r[t][n-1];return o||u}).map(function(e){return e.includes(!0)}).includes(!0)}(o)}}},function(e,t,n){"use strict";n.r(t);var r=n(0);function o(e){return e.reduce((e,t,n)=>{const r=document.createElement("div");return r.classList.add("row",`row-index-${n}`),e.concat(t.reduce((e,t,n)=>{const r=document.createElement("div");return r.classList.add("cell",`cell-index-${n}`,"tile",`tile-${t}`),r.textContent=t,e.appendChild(r),e},r))},[])}const u=e=>{const t=document.querySelector(".game-field"),n=function(e){const t=e=>Array.from(e.childNodes);return t(e).map(e=>t(e).map(e=>Number(e.textContent)))}(t),u={37:"left",38:"up",39:"right",40:"down"}[e.keyCode];if(!u)return;const i=o(Object(r.play)({prevField:n,direction:u}).nextField);for(;t.lastChild;)t.removeChild(t.lastChild);i.forEach(e=>t.appendChild(e))},i=()=>{const e=document.querySelector(".game-field"),t=o(Object(r.play)({isNewGame:!0}).nextField);for(;e.lastChild;)e.removeChild(e.lastChild);t.forEach(t=>e.appendChild(t))};document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".game-field").textContent="loaded",document.addEventListener("keydown",u),document.querySelector(".new-game").addEventListener("click",i)})},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments[2],u=new Array(t).fill(e);return o.apply(void 0,r(u))(n)},i=function(e){return e.reduceRight(function(e,t){return[].concat(r(e),[t])},[])},c=function(e){return e.reduce(function(e,t){return t.map(function(n,r){return(e[r]||[]).concat(t[r])})},[])};t.rotateMatrixClockwise=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return u(function(e){return o(c,i)(e)},t,e)},t.rotateMatrixCounter=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return u(function(e){return o(i,c)(e)},t,e)}}]);